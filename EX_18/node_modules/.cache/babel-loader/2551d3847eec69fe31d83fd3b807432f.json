{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nlet globalState = {};\nlet listeners = [];\nlet actions = {};\nexport const useStore = function () {\n  _s();\n\n  let shouldListen = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n  const setState = useState(globalState)[1];\n\n  const dispatch = (actionIdentifier, payload) => {\n    const newState = actions[actionIdentifier](globalState, payload);\n    globalState = { ...globalState,\n      ...newState\n    };\n\n    for (const listener of listeners) {\n      listener(globalState);\n    }\n  };\n\n  useEffect(() => {\n    if (shouldListen) {\n      listeners.push(setState);\n    }\n\n    return () => {\n      listeners = listeners.filter(li => li !== setState);\n    };\n  }, [setState, shouldListen]);\n  return [globalState, dispatch];\n};\n\n_s(useStore, \"nM5W+84F396yCKDu4U2VhqiPF0o=\");\n\nexport const initStore = (userActions, initialState) => {\n  if (initialState) {\n    globalState = { ...globalState,\n      ...initialState\n    };\n  }\n\n  actions = { ...actions,\n    ...userActions\n  };\n};","map":{"version":3,"sources":["C:/Users/yeoboya/git/react_study/EX_17/src/hooks-store/store.js"],"names":["useState","useEffect","globalState","listeners","actions","useStore","shouldListen","setState","dispatch","actionIdentifier","payload","newState","listener","push","filter","li","initStore","userActions","initialState"],"mappings":";;AAAA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AAEA,IAAIC,WAAW,GAAG,EAAlB;AACA,IAAIC,SAAS,GAAG,EAAhB;AACA,IAAIC,OAAO,GAAG,EAAd;AAEA,OAAO,MAAMC,QAAQ,GAAG,YAAyB;AAAA;;AAAA,MAAxBC,YAAwB,uEAAT,IAAS;AAC/C,QAAMC,QAAQ,GAAGP,QAAQ,CAACE,WAAD,CAAR,CAAsB,CAAtB,CAAjB;;AAEA,QAAMM,QAAQ,GAAG,CAACC,gBAAD,EAAmBC,OAAnB,KAA+B;AAC9C,UAAMC,QAAQ,GAAGP,OAAO,CAACK,gBAAD,CAAP,CAA0BP,WAA1B,EAAuCQ,OAAvC,CAAjB;AACAR,IAAAA,WAAW,GAAG,EAAE,GAAGA,WAAL;AAAkB,SAAGS;AAArB,KAAd;;AAEA,SAAK,MAAMC,QAAX,IAAuBT,SAAvB,EAAkC;AAChCS,MAAAA,QAAQ,CAACV,WAAD,CAAR;AACD;AACF,GAPD;;AASAD,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIK,YAAJ,EAAkB;AAChBH,MAAAA,SAAS,CAACU,IAAV,CAAeN,QAAf;AACD;;AACD,WAAO,MAAM;AACXJ,MAAAA,SAAS,GAAGA,SAAS,CAACW,MAAV,CAAkBC,EAAD,IAAQA,EAAE,KAAKR,QAAhC,CAAZ;AACD,KAFD;AAGD,GAPQ,EAON,CAACA,QAAD,EAAUD,YAAV,CAPM,CAAT;AASA,SAAO,CAACJ,WAAD,EAAcM,QAAd,CAAP;AACD,CAtBM;;GAAMH,Q;;AAwBb,OAAO,MAAMW,SAAS,GAAG,CAACC,WAAD,EAAcC,YAAd,KAA+B;AACtD,MAAIA,YAAJ,EAAkB;AAChBhB,IAAAA,WAAW,GAAG,EAAE,GAAGA,WAAL;AAAkB,SAAGgB;AAArB,KAAd;AACD;;AACDd,EAAAA,OAAO,GAAG,EAAE,GAAGA,OAAL;AAAc,OAAGa;AAAjB,GAAV;AACD,CALM","sourcesContent":["import { useState, useEffect } from \"react\";\r\n\r\nlet globalState = {};\r\nlet listeners = [];\r\nlet actions = {};\r\n\r\nexport const useStore = (shouldListen = true) => {\r\n  const setState = useState(globalState)[1];\r\n\r\n  const dispatch = (actionIdentifier, payload) => {\r\n    const newState = actions[actionIdentifier](globalState, payload);\r\n    globalState = { ...globalState, ...newState };\r\n\r\n    for (const listener of listeners) {\r\n      listener(globalState);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (shouldListen) {\r\n      listeners.push(setState);\r\n    }\r\n    return () => {\r\n      listeners = listeners.filter((li) => li !== setState);\r\n    };\r\n  }, [setState,shouldListen]);\r\n\r\n  return [globalState, dispatch];\r\n};\r\n\r\nexport const initStore = (userActions, initialState) => {\r\n  if (initialState) {\r\n    globalState = { ...globalState, ...initialState };\r\n  }\r\n  actions = { ...actions, ...userActions };\r\n};\r\n"]},"metadata":{},"sourceType":"module"}